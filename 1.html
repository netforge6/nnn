<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–°–∫–ª–∞–¥ —Ç–æ–≤–∞—Ä–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px auto;
            max-width: 800px;
            background: #f6f6f6;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        form {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        input {
            padding: 8px;
            font-size: 14px;
        }
        button {
            padding: 8px 14px;
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover {
            background: #0056b3;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background: #007bff;
            color: white;
        }
        td[contenteditable="true"] {
            background: #f0f8ff;
        }
        .delete-btn {
            background: #dc3545;
        }
        .delete-btn:hover {
            background: #b52a37;
        }
    </style>
</head>
<body>
    <h1>üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</h1>

    <form id="productForm">
        <input type="text" id="name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" required>
        <input type="number" id="quantity" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" required>
        <input type="number" id="price" placeholder="–¶–µ–Ω–∞" required step="0.01">
        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>

    <table id="productTable">
        <thead>
            <tr>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–°—É–º–º–∞</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const form = document.getElementById('productForm');
        const tableBody = document.querySelector('#productTable tbody');
        let products = JSON.parse(localStorage.getItem('products')) || [];

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
        function renderTable() {
            tableBody.innerHTML = '';
            products.forEach((product, index) => {
                const row = document.createElement('tr');

                // –ù–∞–∑–≤–∞–Ω–∏–µ
                const nameCell = document.createElement('td');
                nameCell.textContent = product.name;
                row.appendChild(nameCell);

                // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
                const qtyCell = document.createElement('td');
                qtyCell.textContent = product.quantity;
                qtyCell.contentEditable = "true";
                qtyCell.addEventListener('input', () => updateField(index, 'quantity', qtyCell.textContent));
                row.appendChild(qtyCell);

                // –¶–µ–Ω–∞
                const priceCell = document.createElement('td');
                priceCell.textContent = product.price;
                priceCell.contentEditable = "true";
                priceCell.addEventListener('input', () => updateField(index, 'price', priceCell.textContent));
                row.appendChild(priceCell);

                // –°—É–º–º–∞
                const totalCell = document.createElement('td');
                totalCell.textContent = (product.quantity * product.price).toFixed(2);
                row.appendChild(totalCell);

                // –£–¥–∞–ª–µ–Ω–∏–µ
                const actionCell = document.createElement('td');
                const delBtn = document.createElement('button');
                delBtn.textContent = '–£–¥–∞–ª–∏—Ç—å';
                delBtn.className = 'delete-btn';
                delBtn.onclick = () => deleteProduct(index);
                actionCell.appendChild(delBtn);
                row.appendChild(actionCell);

                tableBody.appendChild(row);
            });
            saveToLocalStorage();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
        form.addEventListener('submit', e => {
            e.preventDefault();
            const name = document.getElementById('name').value.trim();
            const quantity = Number(document.getElementById('quantity').value);
            const price = Number(document.getElementById('price').value);
            products.push({ name, quantity, price });
            form.reset();
            renderTable();
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è
        function updateField(index, field, value) {
            let numValue = Number(value);
            if (field === 'quantity' || field === 'price') {
                products[index][field] = isNaN(numValue) ? 0 : numValue;
            } else {
                products[index][field] = value;
            }
            renderTable();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
        function deleteProduct(index) {
            products.splice(index, 1);
            renderTable();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ LocalStorage
        function saveToLocalStorage() {
            localStorage.setItem('products', JSON.stringify(products));
        }

        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        renderTable();
    </script>
</body>
</html>
